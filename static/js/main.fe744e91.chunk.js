(this["webpackJsonppopulation-graph"]=this["webpackJsonppopulation-graph"]||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(26),s=n.n(c),o=(n(38),n(29)),i=n(2),u=n(8),l=n(3),p=n(6),j=n(15),f=n(4),d=(n(39),n(5)),b=function(e){var t=e.prefecture,n=e.getPref,r=t.prefCode,a=t.prefName;return Object(d.jsxs)("div",{className:"checkbox",children:[Object(d.jsx)("input",{type:"checkbox",id:a,name:a,onClick:function(){return n(r)}}),Object(d.jsx)("label",{htmlFor:a,children:a})]})},h=n(27),O=n.n(h),x=n(28),m=n.n(x),v=function(e){var t=e.prefInfos,n=0,r=0,a=[],c=t.map((function(e){return n=e.years[0],r=e.years[-1],a=e.years,{name:e.prefName,data:e.values}})),s={chart:{type:"spline"},title:{text:""},yAxis:{title:{text:"\u4eba\u53e3\u6570"}},xAxis:{title:{text:"\u5e74\u5ea6"},categories:a,accessibility:{rangeDescription:"Range: ".concat(n," to ").concat(r)}},legend:{layout:"vertical",align:"right",verticalAlign:"middle"},plotOptions:{series:{label:{connectorAllowed:!1}}},series:c,responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"}}}]}};return Object(d.jsx)(O.a,{highcharts:m.a,options:s})},g={method:"GET",headers:{"X-API-KEY":"ziEruYPgMobrjpLgwbjmuXtwLmYGWud74sadCbS5"}},y=function(e){var t=e.data,n=[],r=[];return t.forEach((function(e){n.push(e.value),r.push(e.year)})),{values:n,years:r}},w=function(){var e=Object(p.a)(Object(l.a)().mark((function e(){var t,n,r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://opendata.resas-portal.go.jp/api/v1/prefectures",g);case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,t.ok){e.next=9;break}throw r="\u90fd\u9053\u5e9c\u770c\u60c5\u5831\u304c\u53d6\u308a\u307e\u305b\u3093: ".concat(t.status),new Error(r);case 9:return e.abrupt("return",{data:n.result});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(p.a)(Object(l.a)().mark((function e(t){var n,r,a,c,s,o;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat("https://opendata.resas-portal.go.jp/api/v1/population/composition/perYear?cityCode=-&prefCode=").concat(t),e.next=3,fetch(r,g);case 3:return a=e.sent,e.next=6,a.json();case 6:if(c=e.sent,a.ok){e.next=10;break}throw s="\u5e9c\u770c\u60c5\u5831\u304c\u53d6\u308a\u307e\u305b\u3093: ".concat(a.status),new Error(s);case 10:return o=y(null===(n=c.result)||void 0===n?void 0:n.data[0]),e.abrupt("return",Object(j.a)(Object(j.a)({},o),{},{prefCode:t}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(r.useState)([]),t=Object(f.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)([]),s=Object(f.a)(c,2),o=s[0],i=s[1],h=Object(r.useState)([]),O=Object(f.a)(h,2),x=O[0],m=O[1],g=Object(r.useState)(!1),y=Object(f.a)(g,2),N=y[0],C=y[1];Object(r.useMemo)((function(){if(C(!0),0===o.length)m([]);else{var e=o.map((function(e){var t=x.find((function(t){return t.prefCode===e}));return t||k(e)}));Promise.all(e).then((function(e){var t=e.map((function(e){var t,r=null===(t=n.find((function(t){return t.prefCode===e.prefCode})))||void 0===t?void 0:t.prefName;return Object(j.a)(Object(j.a)({},e),{},{prefName:r})}));m(t),C(!1)}))}}),[o]),Object(r.useMemo)(Object(p.a)(Object(l.a)().mark((function e(){var t;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,w();case 3:t=e.sent,a(t.data),C(!1);case 6:case"end":return e.stop()}}),e)}))),[]);var A=function(e){if(o.find((function(t){return t===e}))){var t=o.filter((function(t){return t!==e}));i(t)}else i([].concat(Object(u.a)(o),[e]))};return Object(d.jsxs)("main",{children:[Object(d.jsx)("div",{className:"overlay ".concat(N?"":"hidden"),children:Object(d.jsx)("div",{className:"spinner"})}),Object(d.jsx)("h1",{style:{background:"#7a7a7a",textAlign:"center",margin:0,fontWeight:"normal"},children:"\u65e5\u672c\u5e9c\u770c\u4eba\u53e3"}),Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("div",{className:"content",children:[Object(d.jsxs)("fieldset",{className:"fieldset",children:[Object(d.jsx)("legend",{children:"\u90fd\u9053\u5e9c\u770c"}),Object(d.jsx)("div",{className:"checkbox-grid",children:n&&n.map((function(e){return Object(d.jsx)(b,{prefecture:e,getPref:A},e.prefName)}))})]}),Object(d.jsx)("div",{className:"graph",children:Object(d.jsx)(v,{prefInfos:x})})]})})]})},C=Object(o.a)([{path:"/",element:Object(d.jsx)(N,{})},{path:"/population-graph",element:Object(d.jsx)(N,{})}]);s.a.createRoot(document.getElementById("root")).render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(i.b,{router:C})}))}},[[41,1,2]]]);
//# sourceMappingURL=main.fe744e91.chunk.js.map